<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta keywords="编程, 环境搭建, 读书笔记, Galgame, 生活技巧"><title>如何将网络教程 (tutorial) 转成 PDF - 自强不息 厚德载物</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="自强不息 厚德载物"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="自强不息 厚德载物"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="1 概述  这篇文章是这个 repo 的 README 内容   1.1 问题由来  - 最近在用 BookxNote Pro （类似 margin note）做笔记，很多网络教程 (tutorial) 没有提供 PDF   版本，如果看过的内容没有立刻应用，就容易遗忘，而对网页做笔记不太容易（虽然有插件），所以在研究怎样批量存成   PDF，并且可以有目录（书签&amp;#x2F;菜单），同时去除无用元素 - 发"><meta property="og:type" content="blog"><meta property="og:title" content="如何将网络教程 (tutorial) 转成 PDF"><meta property="og:url" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/"><meta property="og:site_name" content="自强不息 厚德载物"><meta property="og:description" content="1 概述  这篇文章是这个 repo 的 README 内容   1.1 问题由来  - 最近在用 BookxNote Pro （类似 margin note）做笔记，很多网络教程 (tutorial) 没有提供 PDF   版本，如果看过的内容没有立刻应用，就容易遗忘，而对网页做笔记不太容易（虽然有插件），所以在研究怎样批量存成   PDF，并且可以有目录（书签&amp;#x2F;菜单），同时去除无用元素 - 发"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-1.png"><meta property="og:image" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-2.png"><meta property="og:image" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-3.png"><meta property="og:image" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-4.png"><meta property="og:image" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-5.png"><meta property="og:image" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-6.png"><meta property="og:image" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-7.png"><meta property="og:image" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-8.png"><meta property="og:image" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-9.png"><meta property="article:published_time" content="1970-01-01T00:00:00.000Z"><meta property="article:modified_time" content="2023-10-30T03:31:03.066Z"><meta property="article:author" content="2-3-5-7"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-1.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/"},"headline":"如何将网络教程 (tutorial) 转成 PDF","image":["https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-1.png","https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-2.png","https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-3.png","https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-4.png","https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-5.png","https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-6.png","https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-7.png","https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-8.png","https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-9.png"],"datePublished":"1970-01-01T00:00:00.000Z","dateModified":"2023-10-30T03:31:03.066Z","author":{"@type":"Person","name":"2-3-5-7"},"publisher":{"@type":"Organization","name":"自强不息 厚德载物","logo":{"@type":"ImageObject","url":"https://synrst.de/img/logo.svg"}},"description":"1 概述  这篇文章是这个 repo 的 README 内容   1.1 问题由来  - 最近在用 BookxNote Pro （类似 margin note）做笔记，很多网络教程 (tutorial) 没有提供 PDF   版本，如果看过的内容没有立刻应用，就容易遗忘，而对网页做笔记不太容易（虽然有插件），所以在研究怎样批量存成   PDF，并且可以有目录（书签&#x2F;菜单），同时去除无用元素 - 发"}</script><link rel="canonical" href="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-RMG9YTVY9M" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-RMG9YTVY9M');</script><!--!--><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><i class="fa-regular fa-face-grin-squint-tears"></i></a><div class="navbar-item">Mens et Manus</div><a class="navbar-item search" title="搜索 (Ctrl + K)" href="javascript:;"><i class="fas fa-search"></i></a></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"></div></div><h1 class="title is-3 is-size-4-mobile">如何将网络教程 (tutorial) 转成 PDF</h1><div class="content"><h1 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h1><p>这篇文章是这个 <a target="_blank" rel="noopener" href="https://github.com/2-3-5-7/Web-Tutorial-to-PDF-Converter">repo</a> 的 README 内容</p>
<h2 id="1-1-问题由来"><a href="#1-1-问题由来" class="headerlink" title="1.1 问题由来"></a>1.1 问题由来</h2><ul>
<li>最近在用 <code>BookxNote Pro</code> （类似 margin note）做笔记，很多网络教程 (tutorial) 没有提供 PDF 版本，如果看过的内容没有立刻应用，就容易遗忘，而对网页做笔记不太容易（虽然有插件），所以在研究怎样批量存成 PDF，并且可以有目录（书签&#x2F;菜单），同时去除无用元素</li>
<li>发现 <code>puppeteer</code> 非常适合，之前不太了解 js，一直忽略了它，它配合 <code>puppeteer-cluster</code> 可以实现并行抓取</li>
</ul>
<h2 id="1-2-基本使用和测试"><a href="#1-2-基本使用和测试" class="headerlink" title="1.2 基本使用和测试"></a>1.2 基本使用和测试</h2><ul>
<li>安装 nodejs、puppeteer、puppeteer-cluster</li>
<li>修改 <code>index.js</code><ul>
<li>修改 <code>puppeteerOptions</code> 中的 <code>userDataDir</code> 路径，用于存放浏览器数据</li>
<li>修改 <code>puppeteerOptions.args</code> 中的 <code>--proxy-server</code> 一行的代理设置，没有代理则去掉</li>
</ul>
</li>
<li>运行 <code>node index.js</code> 会在当前目录生成 <code>test</code> 文件夹，抓取正常的话会生成 <code>1.1.1 Async iteration and generators.pdf</code></li>
<li>修改 <code>index.js</code> 最后的， <code>await cluster(&#39;configs\\test.txt&#39;);</code> 注释掉，使用下面的 <code>await cluster(&#39;configs\\The Modern JavaScript Tutorial.txt&#39;);</code>，即可生成 PDF 在 <code>The Modern JavaScript Tutorial</code> 文件夹下，最后可选择用 PDF 编辑器（如福昕pdf编辑器） 合并 PDF为一个文件</li>
<li>如想了解对网络教程生成 PDF 的通用方法，或想生成 <code>The Modern JavaScript Tutorial</code> 的 PDF 书签更精细可以向下阅读</li>
</ul>
<h2 id="1-3-通用方法"><a href="#1-3-通用方法" class="headerlink" title="1.3 通用方法"></a>1.3 通用方法</h2><ul>
<li>通用的转换方法分为 4 步<ul>
<li>获取菜单，可手动填写，也可以通过辅助脚本 <code>make_menu.js</code> 生成。最终构造一个每行包含“下载 url”、“要保存的文件名”、“等级”（行首 tab 缩进个数表示当前文章在教程的等级）所组成的配置文件。已经写好的一些在 <code>configs</code> 文件夹下，可供参考</li>
<li>使用 <code>index.js</code> 运行 <code>puppeteer</code> 根据前面的配置文件，将每个页面保存成单独的 PDF<ul>
<li>在运行前，一般需要修改配置文件，加入抓取前要运行的 JS 代码，代码的目的一般是操作 DOM 移除无用的元素，调用 click 展开折叠的内容，设置 CSS 样式等，相当于生成 PDF 前的预处理。这部分 JS 代码，在配置文件中以 <code>!</code>  开头。配置文件的详细格式可见 <code>configs</code> 下面的示例说明</li>
</ul>
</li>
<li>使用 PDF 编辑器（如福昕pdf编辑器），合并 PDF为一个文件<ul>
<li>在合并前，如有某个等级的内容缺少，需要生成占位的 PDF，如 <a target="_blank" rel="noopener" href="https://javascript.info/">The Modern JavaScript Tutorial</a> 教程就只有 2、3 级有对应页面，而 1 级没有对应页面，那么就需要生成 3 个 1 级 PDF，<code>1. The JavaScript language.pdf</code>、<code>2. Browser꞉ Document, Events, Interfaces.pdf</code>、<code>3. Additional articles.pdf</code>，将这 3 个 PDF 放入前面抓取保存 PDF 的文件夹中，一起进行合并</li>
<li>在合并后，会发现所有菜单（书签）都是 1 级，这时要用 <code>FreePic2Pdf</code> 提取书签生成 <code>FreePic2Pdf_bkmk.txt</code>， 调用 <code>correctBkmk.js</code> 对菜单等级进行修正，再将修改后的 <code>FreePic2Pdf_bkmk_corrected.txt</code> 挂回到原来的 PDF 中</li>
</ul>
</li>
<li>（可选）添加页面内部等级，如按以上步骤生成的 <a target="_blank" rel="noopener" href="https://javascript.info/">The Modern JavaScript Tutorial</a> 是 3 级菜单，但抓取时每个页面内部也是有标题的，页面内的标题可以构成第 4 级菜单<ul>
<li>用 <code>PDF补丁丁</code> 选择要作为 4 级的内容来自动生成书签，生成前勾选保留原有书签（即原来已经存在的前 3 级书签），保存改后的 PDF</li>
<li>再用 <code>FreePic2Pdf</code> 提取改后的 PDF 书签生成 <code>FreePic2Pdf_bkmk.txt</code>，手动修正 <code>FreePic2Pdf_bkmk.txt</code> 中末尾 4 级书签的前几项 （<code>PDF补丁丁</code>生成的前几项的缩进是错的，要加 tab）</li>
<li>最后调用 <code>sortBkmk.js</code>，将 4 级书签按照页码顺序拆入到之前生成的前 3 级书签中，生成 <code>FreePic2Pdf_bkmk_sorted.txt</code></li>
<li>将 <code>FreePic2Pdf_bkmk_sorted.txt</code> 挂回到原来的 PDF 中，至此，一个包含 4 级菜单（书签）的 PDF 制作完成</li>
</ul>
</li>
</ul>
</li>
<li>针对不同的网络教程转 PDF 时，多数流程可以复用，每次需要改变的是<ul>
<li>第 1 步中 <code>make_menu.js</code> 的 CSS selector 或选择手动构造配置文件也行</li>
<li>第 2 步中用于生成 PDF 前的预处理 JS 代码</li>
<li><code>index.js</code> 中，调整并发数目、延时、如有 iframe 则需要等待 frame 加载完，等少量修改</li>
<li>如有某个等级的内容缺少，需要生成占位的 PDF</li>
</ul>
</li>
</ul>
<h1 id="2-步骤详细说明"><a href="#2-步骤详细说明" class="headerlink" title="2 步骤详细说明"></a>2 步骤详细说明</h1><p>以下步骤以  <a target="_blank" rel="noopener" href="https://javascript.info/">The Modern JavaScript Tutorial</a> 为例进行说明</p>
<h2 id="2-1-获取菜单，构造配置文件"><a href="#2-1-获取菜单，构造配置文件" class="headerlink" title="2.1 获取菜单，构造配置文件"></a>2.1 获取菜单，构造配置文件</h2><ul>
<li>在 devtools 的 sources 中新建 snippet，粘贴 <code>make_menu.js</code> 代码</li>
<li>首先通过 chrome devtools 观察网页结构，确定 <code>make_menu.js</code> 中 selectors 数组的内容</li>
<li>selectors 是二维数组，第 1 维度表明不同的级数，比如这个网页有 3 级菜单，那么第 1 维就有 3 个元素</li>
<li>第 2 维度可有 2-4 个元素，依次如下<ul>
<li>items_selector，选择这一级菜单集合的 selector，原理是 <code>这一级元素集合 = 上一级元素.querySelectorAll(items_selector)</code></li>
<li>item_title，选择这一级菜单标题的 selector，原理是 <code>forEach 这一级元素集合 { 标题 = 其中某一元素.querySelector(item_title) }</code></li>
<li>item_url 同 item_title，只不过有的等级没有对应的 url，只有标题时，则这一项不填</li>
<li>item_action，有的菜单需要点击后才会展开，才能获取到下一级菜单，如需点击则为 ‘click’，点击 item_url 后，再继续获取下一级菜单，不需要则不填</li>
</ul>
</li>
</ul>
<p><img src="/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/../%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-1.png"></p>
<ul>
<li>多次调试确定好 selectors 后，运行 make_menu 会打印获取到的菜单，右键 save 将其存为 log</li>
<li>使用带列块编辑的文本编辑器，如 notepad++，删除 log 前无用内容</li>
<li>将 log 文件改名成 xxx.txt 放入 configs 文件夹，xxx 一般是教程的名字</li>
<li>对于不复杂、内容不多的教程，可手动填写配置文件，格式见 configs 文件夹下的例子<ul>
<li><strong>注意配置文件换行是 linux 文件格式</strong> <code>\n</code> 作为换行符，不是 windows 格式<br><img src="/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/../%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-2.png"></li>
</ul>
</li>
</ul>
<h2 id="2-2-设置-JS-代码，下载-PDF"><a href="#2-2-设置-JS-代码，下载-PDF" class="headerlink" title="2.2 设置 JS 代码，下载 PDF"></a>2.2 设置 JS 代码，下载 PDF</h2><ul>
<li><p>修改 <code>index.js</code> 最后使用的配置文件为前面构造的，用 <code>node index.js</code> 测试</p>
</li>
<li><p>一般来说需要设置 JS 来将无用元素删除掉，这样生成的 PDF 更干净</p>
</li>
<li><p>比如不想包含页面最上面这个工具栏，通过 devtools 确定 class 后，使用 querySelector 删除掉<br><img src="/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/../%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-3.png"></p>
</li>
<li><p>反复测试，确定好最终要执行的 JS，将其写入到配置文件中，JS 代码以 <code>!</code> 开头，注释以 <code>*</code> 开头。如 <code>The Modern JavaScript Tutorial</code> 的最终 JS 代码如下</p>
</li>
<li><p>最后用  <code>node index.js</code> 下载 PDF</p>
</li>
</ul>
<p><img src="/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/../%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-4.png"></p>
<h2 id="2-3-完善-PDF"><a href="#2-3-完善-PDF" class="headerlink" title="2.3 完善 PDF"></a>2.3 完善 PDF</h2><ul>
<li><p>生成的 PDF 有可能某个等级的 PDF 缺失，比如 The Modern JavaScript Tutorial 就是第 1 级缺失，需要生成占位的 PDF，对于 The Modern JavaScript Tutorial 就是 3 个 PDF</p>
<ul>
<li>推荐编写 HTML 然后用 chrome 打开，按 A4 大小输出成 PDF<br><img src="/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/../%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-5.png"></li>
</ul>
</li>
<li><p>将生成的 PDF 放入前面步骤存放抓取 PDF 的同一目录，使用 PDF 编辑器（如福昕pdf编辑器）合并成一个 PDF</p>
</li>
<li><p>生成的 PDF 目录等级都是 1 级，所以需要修正</p>
<ul>
<li>用 <code>FreePic2Pdf</code> 选 “从 PDF 取书签”，生成 <code>FreePic2Pdf_bkmk.txt</code>，拷贝到 <code>correctBkmk.js</code>  所在目录</li>
<li>用 <code>correctBkmk.js</code> 修正  <code>FreePic2Pdf_bkmk.txt</code></li>
<li>将修正后的 <code>FreePic2Pdf_bkmk_corrected.txt</code> 粘贴到原 <code>FreePic2Pdf_bkmk.txt</code></li>
<li>用 <code>FreePic2Pdf</code> 选 “往 PDF 挂书签”，将改后书签挂回<br><img src="/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/../%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-6.png"></li>
</ul>
</li>
</ul>
<h2 id="2-4-（可选）添加页面内部等级"><a href="#2-4-（可选）添加页面内部等级" class="headerlink" title="2.4 （可选）添加页面内部等级"></a>2.4 （可选）添加页面内部等级</h2><ul>
<li>如按以上步骤生成的 <a target="_blank" rel="noopener" href="https://javascript.info/">The Modern JavaScript Tutorial</a> 是 3 级菜单，但抓取时每个页面内部也是有标题的，页面内的标题可以构成第 4 级菜单</li>
<li>使用 <code>PDF 补丁丁</code>，在要作为 4 级标题的内容上右键，在生成书签时一定要勾选“保留原有书签”，最后保存 PDF</li>
</ul>
<p><img src="/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/../%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-7.png"></p>
<ul>
<li>用 <code>FreePic2Pdf</code> 选 “从 PDF 取书签”，生成 <code>FreePic2Pdf_bkmk.txt</code>，操作方法参考前一步骤</li>
<li>手动修正 <code>FreePic2Pdf_bkmk.txt</code> 中末尾 4 级书签的前几项 ，<code>PDF补丁丁</code>生成的前几项的缩进是错的，要加 tab</li>
</ul>
<p><img src="/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/../%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-8.png"></p>
<ul>
<li>将 <code>FreePic2Pdf_bkmk.txt</code>，拷贝到 <code>sortBkmk.js</code>  所在目录，将 4 级书签按照页码顺序拆入到之前生成的前 3 级书签中，生成 <code>FreePic2Pdf_bkmk_sorted.txt</code></li>
<li>将修正后的 <code>FreePic2Pdf_bkmk_sorted.txt</code> 粘贴到原 <code>FreePic2Pdf_bkmk.txt</code></li>
<li>用 <code>FreePic2Pdf</code> 选 “往 PDF 挂书签”，将改后书签挂回，操作方法参考前一步骤</li>
</ul>
<h1 id="3-最终效果"><a href="#3-最终效果" class="headerlink" title="3 最终效果"></a>3 最终效果</h1><ul>
<li>至此便成功生成了 <code>The Modern JavaScript Tutorial</code> 的具备 disqus 评论、4 级书签的 PDF 文件<ul>
<li>由于 <code>The Modern JavaScript Tutorial</code> 的 PDF 版本是收费的，所以<strong>不提供最终的 PDF，请按教程自行下载</strong></li>
</ul>
</li>
<li>用到的 <code>FreePic2Pdf</code> 和 <code>PDF 补丁丁</code> 在 <code>bin</code> 目录内，也可自行搜索最新版</li>
<li>可按照这个方法将其它网络教程 (tutorial) 转成 PDF</li>
</ul>
<p><img src="/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3.%20%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/../%E5%A6%82%E4%BD%95%E5%B0%86%E7%BD%91%E7%BB%9C%E6%95%99%E7%A8%8B%20(tutorial)%20%E8%BD%AC%E6%88%90%20PDF/img-9.png"></p>
<p><a target="_blank" rel="noopener" href="https://github.com/2-3-5-7/2-3-5-7.github.io/tree/main/虚拟环境/3. 处理工具/如何将网络教程 (tutorial) 转成 PDF"><i class="fa-solid fa-download fa-2xl" style="color: gray;"></i></a></p>
</div><!--!--></article></div><!--!--><div class="card"><div class="card-content"><script src="https://giscus.app/client.js" data-repo="2-3-5-7/2-3-5-7.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkzNDMwMjg1MTc=" data-category="General" data-category-id="DIC_kwDOFHIzJc4CWmss" data-mapping="pathname" data-strict="0" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="bottom" data-theme="https://synrst.de/css/light4giscus.css" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async></script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#1-概述"><span class="level-left"><span class="level-item">1 概述</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-1-问题由来"><span class="level-left"><span class="level-item">1.1 问题由来</span></span></a></li><li><a class="level is-mobile" href="#1-2-基本使用和测试"><span class="level-left"><span class="level-item">1.2 基本使用和测试</span></span></a></li><li><a class="level is-mobile" href="#1-3-通用方法"><span class="level-left"><span class="level-item">1.3 通用方法</span></span></a></li></ul></li><li><a class="level is-mobile" href="#2-步骤详细说明"><span class="level-left"><span class="level-item">2 步骤详细说明</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#2-1-获取菜单，构造配置文件"><span class="level-left"><span class="level-item">2.1 获取菜单，构造配置文件</span></span></a></li><li><a class="level is-mobile" href="#2-2-设置-JS-代码，下载-PDF"><span class="level-left"><span class="level-item">2.2 设置 JS 代码，下载 PDF</span></span></a></li><li><a class="level is-mobile" href="#2-3-完善-PDF"><span class="level-left"><span class="level-item">2.3 完善 PDF</span></span></a></li><li><a class="level is-mobile" href="#2-4-（可选）添加页面内部等级"><span class="level-left"><span class="level-item">2.4 （可选）添加页面内部等级</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-最终效果"><span class="level-left"><span class="level-item">3 最终效果</span></span></a></li></ul></div></div><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E4%B8%93%E4%B8%9A/"><span class="level-start"><span class="level-item">专业</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/"><span class="level-start"><span class="level-item">爱好</span></span><span class="level-end"><span class="level-item tag">26</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/Galgame/"><span class="level-start"><span class="level-item">Galgame</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/Galgame/Ever17/"><span class="level-start"><span class="level-item">Ever17</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/Galgame/Ever17/%E4%BA%BA%E7%89%A9/"><span class="level-start"><span class="level-item">人物</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/Galgame/Ever17/%E5%9C%B0%E7%82%B9/"><span class="level-start"><span class="level-item">地点</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/Galgame/Ever17/%E5%9C%BA%E6%99%AF/"><span class="level-start"><span class="level-item">场景</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"><span class="level-start"><span class="level-item">读书笔记</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E7%89%A9%E7%90%86%E7%8E%AF%E5%A2%83/"><span class="level-start"><span class="level-item">物理环境</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"><span class="level-start"><span class="level-item">虚拟环境</span></span><span class="level-end"><span class="level-item tag">21</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/1-%E6%9D%A5%E6%BA%90%E4%B8%8E%E6%94%B6%E9%9B%86/"><span class="level-start"><span class="level-item">1. 来源与收集</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/2-%E5%A4%84%E7%90%86%E5%B9%B3%E5%8F%B0/"><span class="level-start"><span class="level-item">2. 处理平台</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3-%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">3. 处理工具</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/4-%E5%88%86%E4%BA%AB%E4%B8%8E%E5%A4%87%E4%BB%BD/"><span class="level-start"><span class="level-item">4. 分享与备份</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li></ul></div></div></div></div><!--!--></div></div></section><div><button id="toc-btn" onclick="toc.style.display = &#039;block&#039;;toc.onclick = () =&gt; toc.style.display = &#039;none&#039; " style="display: none;"><i class="fa-solid fa-list-ul"></i></button><button id="search-btn" onclick="document.querySelector(&#039;a.navbar-item.search&#039;).click();" style="display: none;"><i class="fa-solid fa-search fa-sm"></i></button></div><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>