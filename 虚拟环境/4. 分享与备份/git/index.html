<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta keywords="编程, 环境搭建, 读书笔记, Galgame, 生活技巧"><title>git - 自强不息 厚德载物</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="自强不息 厚德载物"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="自强不息 厚德载物"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="123456789101112   git config --global user.name &amp;quot;Your Name&amp;quot;   # 不设置 email   git config --global user.email &amp;#39;&amp;lt;&amp;gt;&amp;#39;   # 支持中文路径和文件名   git config --global core.quotepath false   # 编辑器设为 vi   git confi"><meta property="og:type" content="blog"><meta property="og:title" content="git"><meta property="og:url" content="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/4.%20%E5%88%86%E4%BA%AB%E4%B8%8E%E5%A4%87%E4%BB%BD/git/"><meta property="og:site_name" content="自强不息 厚德载物"><meta property="og:description" content="123456789101112   git config --global user.name &amp;quot;Your Name&amp;quot;   # 不设置 email   git config --global user.email &amp;#39;&amp;lt;&amp;gt;&amp;#39;   # 支持中文路径和文件名   git config --global core.quotepath false   # 编辑器设为 vi   git confi"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://synrst.de/img/og_image.png"><meta property="article:published_time" content="1970-01-01T00:00:00.000Z"><meta property="article:modified_time" content="2023-05-28T03:50:53.701Z"><meta property="article:author" content="2-3-5-7"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://synrst.de/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/4.%20%E5%88%86%E4%BA%AB%E4%B8%8E%E5%A4%87%E4%BB%BD/git/"},"headline":"git","image":["https://synrst.de/img/og_image.png"],"datePublished":"1970-01-01T00:00:00.000Z","dateModified":"2023-05-28T03:50:53.701Z","author":{"@type":"Person","name":"2-3-5-7"},"publisher":{"@type":"Organization","name":"自强不息 厚德载物","logo":{"@type":"ImageObject","url":"https://synrst.de/img/logo.svg"}},"description":"123456789101112   git config --global user.name &quot;Your Name&quot;   # 不设置 email   git config --global user.email &#39;&lt;&gt;&#39;   # 支持中文路径和文件名   git config --global core.quotepath false   # 编辑器设为 vi   git confi"}</script><link rel="canonical" href="https://synrst.de/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/4.%20%E5%88%86%E4%BA%AB%E4%B8%8E%E5%A4%87%E4%BB%BD/git/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-RMG9YTVY9M" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-RMG9YTVY9M');</script><!--!--><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><i class="fa-regular fa-face-grin-squint-tears"></i></a><div class="navbar-item">Mens et Manus</div><a class="navbar-item search" title="搜索 (Ctrl + K)" href="javascript:;"><i class="fas fa-search"></i></a></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><a class="link-muted" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/">虚拟环境</a><span> / </span><a class="link-muted" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/4-%E5%88%86%E4%BA%AB%E4%B8%8E%E5%A4%87%E4%BB%BD/">4. 分享与备份</a></span></div></div><h1 class="title is-3 is-size-4-mobile">git</h1><div class="content"><h1 id="1-基础"><a href="#1-基础" class="headerlink" title="1 基础"></a>1 基础</h1><p><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000">初级教程</a>、 <a href="/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/4.%20%E5%88%86%E4%BA%AB%E4%B8%8E%E5%A4%87%E4%BB%BD/git/../atlassian-git-cheatsheet.pdf">命令总结文档</a>、<a href="/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/4.%20%E5%88%86%E4%BA%AB%E4%B8%8E%E5%A4%87%E4%BB%BD/git/../progit.pdf">Pro Git 2nd</a>、<a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v2">Pro Git 2nd</a>（网页版）</p>
<ol>
<li>git 特点分布式，不必联网。建议文本 <code>UTF-8</code> 编码</li>
<li>安装 linux上 apt-get 或者 源码， <a target="_blank" rel="noopener" href="https://git-scm.com/downloads">windows版本</a></li>
<li>设置全局的用户名和邮箱，设置代理，初始化 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   git config --global user.name <span class="string">&quot;Your Name&quot;</span></span><br><span class="line">   <span class="comment"># 不设置 email</span></span><br><span class="line">   git config --global user.email <span class="string">&#x27;&lt;&gt;&#x27;</span></span><br><span class="line">   <span class="comment"># 支持中文路径和文件名</span></span><br><span class="line">   git config --global core.quotepath <span class="literal">false</span></span><br><span class="line">   <span class="comment"># 编辑器设为 vi</span></span><br><span class="line">   git config --global core.editor <span class="string">&quot;vi&quot;</span> </span><br><span class="line">   <span class="comment"># 查看设置</span></span><br><span class="line">   git config --list</span><br><span class="line">   git config --global core.autocrlf <span class="literal">false</span></span><br><span class="line"><span class="comment"># 提交简写</span></span><br><span class="line">git config --global alias.ac <span class="string">&#x27;!git add -A &amp;&amp; git commit -m&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>git pull 默认取所有分支，–all 取所有 remote。git push 默认当前分支，–all 所有分支</li>
<li>代理，只用 ssh 协议，不用 http。<a target="_blank" rel="noopener" href="https://www.v2ex.com/t/843383">参考</a> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">    Hostname ssh.github.com</span><br><span class="line">    IdentityFile C:\Users\XXX\.ssh\id_ed25519</span><br><span class="line">    User git</span><br><span class="line">    Port 443</span><br><span class="line">    ProxyCommand &quot;D:\soft\Git\mingw64\bin\connect.exe&quot; -S 127.0.0.1:17890 %h %p</span><br><span class="line">Host *</span><br><span class="line">    IdentityFile C:\Users\XXX\.ssh\id_rsa</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="1-1-图形工具"><a href="#1-1-图形工具" class="headerlink" title="1.1 图形工具"></a>1.1 图形工具</h2><p>参考 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/572237/whats-the-best-three-way-merge-tool">best-three-way-merge-tool</a>，使用 p4merge 和 meld</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install meld</span><br><span class="line">git config --global diff.tool meld</span><br><span class="line"><span class="comment"># 官网注册下载</span></span><br><span class="line"><span class="comment"># 使用手册 https://www.perforce.com/manuals/p4merge/Content/P4Merge/Home-p4merge.html</span></span><br><span class="line">sudo <span class="built_in">ln</span> -s /home/zack/bin/p4v-2019.1.1830398/bin/p4merge /usr/local/bin/p4merge</span><br><span class="line">git config --global merge.tool p4merge</span><br><span class="line"><span class="built_in">cat</span> ~/.gitconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以选择关闭</span></span><br><span class="line">git config --global difftool.prompt <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># windows 下的配置，User/用户名/.gitconfig，注意路径斜杠用 /</span></span><br><span class="line"><span class="comment"># 设置 meld 的字体时选择 Yahei Consolas Hybrid，指定英文字体时会因为没有中文字符显示乱码</span></span><br><span class="line">[http]</span><br><span class="line">	proxy = socks5://127.0.0.1:17890</span><br><span class="line">[user]</span><br><span class="line">	email = &lt;&gt;</span><br><span class="line">	name = Jian-Feng Du</span><br><span class="line">[core]</span><br><span class="line">	quotepath = <span class="literal">false</span></span><br><span class="line">[diff]</span><br><span class="line">	tool = meld</span><br><span class="line">[difftool]</span><br><span class="line">	prompt = <span class="literal">true</span></span><br><span class="line">[difftool <span class="string">&quot;meld&quot;</span>]</span><br><span class="line">	cmd = <span class="string">&quot;\&quot;D:/soft/Meld/Meld.exe\&quot; \&quot;<span class="variable">$LOCAL</span>\&quot; \&quot;<span class="variable">$REMOTE</span>\&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>受限于网速时可用 vimdiff</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://gist.github.com/mattratleph/4026987">一些按键</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/45309395">关于 merge 的按键</a></li>
</ul>
<h2 id="1-2-查看修改和历史"><a href="#1-2-查看修改和历史" class="headerlink" title="1.2 查看修改和历史"></a>1.2 查看修改和历史</h2><ul>
<li><code>git diff</code> 比较的是工作区与暂存区的差异，<code>git diff HEAD -- readme.txt</code> 用来比较工作区与分支的差异，<code>git diff --cached</code> 比较暂存区与分支差异</li>
<li>commit 的几种表示法详见 <a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v2/Git-Tools-Revision-Selection">Revision-Selection</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看历史提交</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=<span class="string">&#x27;%C(yellow)%h%Creset %C(green)%cd%Creset %C(blue)%d%Creset %s&#x27;</span> --<span class="built_in">date</span>=format:%m-%d --graph 1.1.1^..HEAD </span><br><span class="line">git config --global alias.lg <span class="string">&quot;log --pretty=&#x27;%C(yellow)%h%Creset %C(green)%cd%Creset %C(blue)%d%Creset %s&#x27; --date=format:%m-%d --graph&quot;</span></span><br><span class="line"><span class="comment"># 找到第一个 commit</span></span><br><span class="line">git rev-list --max-parents=0 --pretty HEAD</span><br><span class="line"><span class="comment"># 查看历史修改的文件列表</span></span><br><span class="line">git diff-tree --no-commit-id --name-only -r bd61ad98</span><br><span class="line"><span class="comment"># 某个文件的历史修改</span></span><br><span class="line">git <span class="built_in">log</span> -p -- filename</span><br><span class="line"><span class="comment"># 也可以使用脚本 diff_hist.sh 见资源</span></span><br></pre></td></tr></table></figure>

<h2 id="1-3-改写历史"><a href="#1-3-改写历史" class="headerlink" title="1.3 改写历史"></a>1.3 改写历史</h2><p><a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History">Rewriting-History</a></p>
<p>git merge 和 git rebase 都是先切换到目标分支，然后指定源分支的方式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把一个提交应用到多个分支上</span></span><br><span class="line">git cherry-pick &lt;commit <span class="built_in">id</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="1-4-回到过去"><a href="#1-4-回到过去" class="headerlink" title="1.4 回到过去"></a>1.4 回到过去</h2><p><a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified">Reset and checkout</a></p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">HEAD</th>
<th align="left">Index</th>
<th align="left">Workdir</th>
<th>WD Safe?</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Commit Level</strong></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td></td>
</tr>
<tr>
<td align="left"><code>reset --soft [commit]</code></td>
<td align="left">REF</td>
<td align="left">NO</td>
<td align="left">NO</td>
<td>YES</td>
</tr>
<tr>
<td align="left"><code>reset [commit]</code></td>
<td align="left">REF</td>
<td align="left">YES</td>
<td align="left">NO</td>
<td>YES</td>
</tr>
<tr>
<td align="left"><code>reset --hard [commit]</code></td>
<td align="left">REF</td>
<td align="left">YES</td>
<td align="left">YES</td>
<td><strong>NO</strong></td>
</tr>
<tr>
<td align="left"><code>checkout &lt;commit&gt;</code></td>
<td align="left">HEAD</td>
<td align="left">YES</td>
<td align="left">YES</td>
<td>YES</td>
</tr>
<tr>
<td align="left"><strong>File Level</strong></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td></td>
</tr>
<tr>
<td align="left"><code>reset [commit] &lt;paths&gt;</code></td>
<td align="left">NO</td>
<td align="left">YES</td>
<td align="left">NO</td>
<td>YES</td>
</tr>
<tr>
<td align="left"><code>checkout [commit]/index &lt;paths&gt;</code></td>
<td align="left">NO</td>
<td align="left">YES&#x2F;NO</td>
<td align="left">YES</td>
<td><strong>NO</strong></td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用远端还原本地</span></span><br><span class="line">git fetch</span><br><span class="line">git checkout origin/dev -- src_comm/tiny_config.c</span><br></pre></td></tr></table></figure>

<h2 id="1-5-加快下载"><a href="#1-5-加快下载" class="headerlink" title="1.5 加快下载"></a>1.5 加快下载</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># shallow clone，可以不把全部的 commit 和 branch 都下载下来，节省下载时间</span></span><br><span class="line">git <span class="built_in">clone</span> --depth=1 url</span><br><span class="line">git <span class="built_in">clone</span> --depth=1 --single-branch --branch branch url</span><br><span class="line">git fetch --unshallow</span><br><span class="line">git fetch --depth=200</span><br><span class="line"><span class="comment"># https://stackoverflow.com/questions/6802145/how-to-convert-a-git-shallow-clone-to-a-full-clone</span></span><br><span class="line">git config remote.origin.fetch <span class="string">&quot;+refs/heads/*:refs/remotes/origin/*&quot;</span></span><br><span class="line">git fetch origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载失败可以尝试修改</span></span><br><span class="line">git config --global http.postBuffer 524288000</span><br></pre></td></tr></table></figure>

<h1 id="2-用-subtree-管理库"><a href="#2-用-subtree-管理库" class="headerlink" title="2 用 subtree 管理库"></a>2 用 subtree 管理库</h1><ul>
<li>不像 submodule 显示的写到 git 配置文件中，但一次 clone 就包含所有文件，管理更简单</li>
<li>介绍见 <a target="_blank" rel="noopener" href="https://gist.github.com/2-3-5-7/0c00a7651b99a82356de2c4b516725af">Git Subtree Basics</a>、<a target="_blank" rel="noopener" href="https://www.atlassian.com/git/tutorials/git-subtree">Git subtree: the alternative to Git submodule</a></li>
</ul>
<h1 id="3-问题"><a href="#3-问题" class="headerlink" title="3 问题"></a>3 问题</h1><h2 id="3-1-多个远端仓库"><a href="#3-1-多个远端仓库" class="headerlink" title="3.1 多个远端仓库"></a>3.1 多个远端仓库</h2><p>只要远端不同，同一公钥可以用在多处仓库，只有在<strong>同一网站</strong>（比如 github）上有多个账号时需要配置多个 key</p>
<h3 id="3-1-1-生成新-key"><a href="#3-1-1-生成新-key" class="headerlink" title="3.1.1 生成新 key"></a>3.1.1 生成新 key</h3><ol>
<li>按照 <a target="_blank" rel="noopener" href="https://www.awaimai.com/2200.html">git配置多个SSH Key</a>  ，其中命令可以指定文件名 <code>ssh-keygen -t rsa -b 4096 -C &quot;another_mail@qq.com&quot; -f id_rsa_github</code></li>
<li>页面上添加对应公钥</li>
</ol>
<h3 id="3-1-2-添加-remote"><a href="#3-1-2-添加-remote" class="headerlink" title="3.1.2 添加 remote"></a>3.1.2 添加 remote</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin https://github.com/user/repo.git</span><br><span class="line">git remote -v</span><br></pre></td></tr></table></figure>

<h3 id="3-1-3-设置-track-分支"><a href="#3-1-3-设置-track-分支" class="headerlink" title="3.1.3 设置 track 分支"></a>3.1.3 设置 track 分支</h3><p><a target="_blank" rel="noopener" href="https://www.git-tower.com/learn/git/faq/track-remote-upstream-branch">track-remote-upstream-branch</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set upstream when pushing to remote</span></span><br><span class="line">git push -u origin topic</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set upstream without pushing it</span></span><br><span class="line"><span class="comment"># with option -u / --set-upstream-to</span></span><br><span class="line">git branch -u origin/topic</span><br><span class="line">git branch --set-upstream-to=origin/topic</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证</span></span><br><span class="line"><span class="built_in">cat</span> .git/config</span><br></pre></td></tr></table></figure>

<h2 id="3-2-个人代码同步"><a href="#3-2-个人代码同步" class="headerlink" title="3.2 个人代码同步"></a>3.2 个人代码同步</h2><p>对未改完的代码提交一个临时的 commit，两端都基于这个 commit 来改代码（使用 commit –amend）和同步，已经修改完成则将 commit message 修改或 rebase 整理历史。</p>
<p>参考 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/9813816/git-pull-after-forced-update">git-pull-after-forced-update</a>，两端都按下面步骤进行</p>
<ol>
<li>取回使用 <code>git pull --rebase</code> 来更新另一端的提交</li>
<li>修改代码</li>
<li>改写历史 <code>git rebase -i HEAD~~</code> 或合并到最近的历史  <code>git commit --amend</code></li>
<li>更新提交历史 <code>git push -f</code></li>
</ol>
<h2 id="3-3-删除分支"><a href="#3-3-删除分支" class="headerlink" title="3.3 删除分支"></a>3.3 删除分支</h2><p>3 种情况，远端、本地、本地的 track 分支 <a target="_blank" rel="noopener" href="https://cmatskas.com/delete-git-branch-locally-and-remotely/">Delete Git branch locally and remotely</a></p>
<h2 id="3-4-查找谁引入的问题"><a href="#3-4-查找谁引入的问题" class="headerlink" title="3.4 查找谁引入的问题"></a>3.4 查找谁引入的问题</h2><ul>
<li>git bisect 指定两个 commit 来二分查找，good&#x2F;old –&gt; bad&#x2F;new，详情见 <a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-bisect">git bisect</a> 和 <a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-bisect-lk2009">Fighting regressions with git bisect</a></li>
<li>辅助用 <a target="_blank" rel="noopener" href="https://www.atlassian.com/git/tutorials/inspecting-a-repository/git-blame">git blame 或 git log -S</a></li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/2-3-5-7/2-3-5-7.github.io/tree/main/虚拟环境/4. 分享与备份/git"><i class="fa-solid fa-download fa-2xl" style="color: gray;"></i></a></p>
</div><!--!--></article></div><!--!--><div class="card"><div class="card-content"><script src="https://giscus.app/client.js" data-repo="2-3-5-7/2-3-5-7.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkzNDMwMjg1MTc=" data-category="General" data-category-id="DIC_kwDOFHIzJc4CWmss" data-mapping="pathname" data-strict="0" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="bottom" data-theme="https://synrst.de/css/light4giscus.css" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async></script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#1-基础"><span class="level-left"><span class="level-item">1 基础</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-1-图形工具"><span class="level-left"><span class="level-item">1.1 图形工具</span></span></a></li><li><a class="level is-mobile" href="#1-2-查看修改和历史"><span class="level-left"><span class="level-item">1.2 查看修改和历史</span></span></a></li><li><a class="level is-mobile" href="#1-3-改写历史"><span class="level-left"><span class="level-item">1.3 改写历史</span></span></a></li><li><a class="level is-mobile" href="#1-4-回到过去"><span class="level-left"><span class="level-item">1.4 回到过去</span></span></a></li><li><a class="level is-mobile" href="#1-5-加快下载"><span class="level-left"><span class="level-item">1.5 加快下载</span></span></a></li></ul></li><li><a class="level is-mobile" href="#2-用-subtree-管理库"><span class="level-left"><span class="level-item">2 用 subtree 管理库</span></span></a></li><li><a class="level is-mobile" href="#3-问题"><span class="level-left"><span class="level-item">3 问题</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-1-多个远端仓库"><span class="level-left"><span class="level-item">3.1 多个远端仓库</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-1-1-生成新-key"><span class="level-left"><span class="level-item">3.1.1 生成新 key</span></span></a></li><li><a class="level is-mobile" href="#3-1-2-添加-remote"><span class="level-left"><span class="level-item">3.1.2 添加 remote</span></span></a></li><li><a class="level is-mobile" href="#3-1-3-设置-track-分支"><span class="level-left"><span class="level-item">3.1.3 设置 track 分支</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-2-个人代码同步"><span class="level-left"><span class="level-item">3.2 个人代码同步</span></span></a></li><li><a class="level is-mobile" href="#3-3-删除分支"><span class="level-left"><span class="level-item">3.3 删除分支</span></span></a></li><li><a class="level is-mobile" href="#3-4-查找谁引入的问题"><span class="level-left"><span class="level-item">3.4 查找谁引入的问题</span></span></a></li></ul></li></ul></div></div><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E4%B8%93%E4%B8%9A/"><span class="level-start"><span class="level-item">专业</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/"><span class="level-start"><span class="level-item">爱好</span></span><span class="level-end"><span class="level-item tag">26</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/Galgame/"><span class="level-start"><span class="level-item">Galgame</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/Galgame/Ever17/"><span class="level-start"><span class="level-item">Ever17</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/Galgame/Ever17/%E4%BA%BA%E7%89%A9/"><span class="level-start"><span class="level-item">人物</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/Galgame/Ever17/%E5%9C%B0%E7%82%B9/"><span class="level-start"><span class="level-item">地点</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/Galgame/Ever17/%E5%9C%BA%E6%99%AF/"><span class="level-start"><span class="level-item">场景</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/%E7%88%B1%E5%A5%BD/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"><span class="level-start"><span class="level-item">读书笔记</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E7%89%A9%E7%90%86%E7%8E%AF%E5%A2%83/"><span class="level-start"><span class="level-item">物理环境</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"><span class="level-start"><span class="level-item">虚拟环境</span></span><span class="level-end"><span class="level-item tag">19</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/1-%E6%9D%A5%E6%BA%90%E4%B8%8E%E6%94%B6%E9%9B%86/"><span class="level-start"><span class="level-item">1. 来源与收集</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/2-%E5%A4%84%E7%90%86%E5%B9%B3%E5%8F%B0/"><span class="level-start"><span class="level-item">2. 处理平台</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/3-%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">3. 处理工具</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/4-%E5%88%86%E4%BA%AB%E4%B8%8E%E5%A4%87%E4%BB%BD/"><span class="level-start"><span class="level-item">4. 分享与备份</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li></ul></div></div></div></div><!--!--></div></div></section><div><button id="toc-btn" onclick="toc.style.display = &#039;block&#039;;toc.onclick = () =&gt; toc.style.display = &#039;none&#039; " style="display: none;"><i class="fa-solid fa-list-ul"></i></button><button id="search-btn" onclick="document.querySelector(&#039;a.navbar-item.search&#039;).click();" style="display: none;"><i class="fa-solid fa-search fa-sm"></i></button></div><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>